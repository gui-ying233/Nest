<!DOCTYPE html>
<html lang="zh-Hans-CN">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="color-scheme" content="light dark" />
		<meta name="theme-color" content="hsl(0, 0%, 92%);" />
		<meta
			name="theme-color"
			media="(prefers-color-scheme: dark)"
			content="hsl(0, 0%, 4%);"
		/>
		<meta name="author" content="鬼影233" />
		<meta
			name="description"
			content="CodeMirror 的空 url() Bug 以及如何解决。"
		/>
		<meta
			name="keywords"
			content="CodeMirror, url(), Bug, url, Chromium, Chrome, Edge, content, background-image, @import, CSS, 解决方案, 解决方法"
		/>
		<meta property="og:title" content="CodeMirror url() Bug" />
		<meta property="og:locale" content="zh_CN" />
		<meta
			property="og:url"
			content="https://gui-ying233.github.io/Nest/CodeMirror%20url()%20Bug"
		/>
		<meta property="og:site_name" content="鬼影的基地" />
		<meta
			property="og:description"
			content="CodeMirror 的空 url() Bug 以及如何解决。"
		/>
		<meta property="og:type" content="article" />
		<meta property="article:author" content="鬼影233" />
		<meta
			property="og:image"
			content="https://gui-ying233.github.io/Nest/src/asset/image/url()%20highlighting%20error%20in%20light.webp"
		/>
		<meta
			property="og:image:alt"
			content="inspector-stylesheet 中出现了高亮异常，后续字符变为字符串的高亮颜色。"
		/>
		<meta name="twitter:card" content="summary" />
		<meta property="twitter:title" content="CodeMirror url() Bug" />
		<meta property="twitter:creator" content="@guiying2333" />
		<meta property="twitter:site" content="@guiying2333" />
		<link
			rel="canonical"
			href="https://gui-ying233.github.io/Nest/CodeMirror%20url()%20Bug"
		/>
		<link rel="icon" type="image/x-icon" href="src/asset/favicon.ico" />
		<link rel="apple-touch-icon" href="src/asset/favicon.ico" />
		<title>CodeMirror url() Bug - 鬼影的基地</title>
		<script defer src="src/js/clarity.min.js"></script>
		<script
			defer
			src="https://www.googletagmanager.com/gtag/js?id=G-ZMHY61ZCQE"
		></script>
		<script defer src="src/js/gtag.min.js"></script>
		<script
			defer
			src="https://hm.baidu.com/hm.js?abdce5cc5a81bdfb51506edb4641e824"
		></script>
		<script
			src="https://app.rybbit.io/api/script.js"
			data-site-id="1309"
			data-track-errors="true"
			data-session-replay="true"
			data-web-vitals="true"
			data-tracking-errors="true"
			defer
		></script>
		<link rel="stylesheet" href="src/css/base.min.css" />
		<script type="speculationrules">
			{
				"prerender": [{ "urls": ["."] }],
				"prefetch": [
					{
						"where": { "selector_matches": "a[target='_blank']" },
						"eagerness": "moderate"
					}
				]
			}
		</script>
	</head>
	<body>
		<h1>CodeMirror <code>url()</code> Bug</h1>
		<h2>前言</h2>
		<p>
			CodeMirror 等，甚至 Chromium 下的 inspector-stylesheet
			等地方，如果使用空的
			<code>url()</code> 值，会导致后续的内容出现高亮异常。
		</p>
		<p>
			曾经在某些未知的情况下（Chromium
			中）会导致后续的代码直接失效的情况，但无法复现。
		</p>
		<h2>复现</h2>
		<pre data-lang="CSS">
* {
	background-image: url();
	color: #FF0;
}</pre
		>
		<p>将此段代码放入 inspector-stylesheet 中，即可复现。</p>
		<figure>
			<picture
				style="
					--light-base64: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAAAXNSR0IArs4c6QAAANVJREFUKFPFkLFKxFAURM9NChVTJq0GsbG0EvMZG79AKz9MwWK3zj+4IKhNsIyCRXADKxtB3xvxBUTZdVunm8tlODPWPD3r4vKK07NzIhNxbHzJzJBAEjacVsoW/bvCM8Zj05BlGVsbmxiG84Yi4c0Fb1rOMC8/nAVVVXF0fMjN9T1d1zEalcjEeDKmLE9oX+c83N5RFEUgDKReTmgwdV2zm+8we2mZTafk+we0iznb+R5pmvLhHG99T5Ik3yghwIgGiNB3TeEVK/wK+HuqNSP+JPiXgE+jaF6yto0zFgAAAABJRU5ErkJggg==');
					--dark-base64: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAYAAADwdn+XAAAAAXNSR0IArs4c6QAAANpJREFUKFOlkDFPwmAQhp/7IEDjH8DFUVpiwlQWp24dOrj4KzEmxIGNHwDpL5CBxsSpiS5WbdPvDG0KGCGRcNPl7t7n7j0Jw1CjKGLy8Ihi0TLHChjbQoVt7KW7IiC+72tVEUO/f0mapuR5QQelMIIVxagi9dSfENd1t60gCIjjmNtxByzM5ivapcPd/ZDp0xq5cBhdD1kuFrvLNgDVmuF5HkmScNVaMR7c8Pz6wae2efm2vL1/gTE43R5Zlv0GVA6kdtnADh98xEIjaiD/FVeL939wirCZPRvwAww3TSdz8FOfAAAAAElFTkSuQmCC');
				"
			>
				<source
					srcset="
						src/asset/image/url()%20highlighting%20error%20in%20light.webp
					"
					media="(prefers-color-scheme: light)"
				/>
				<source
					srcset="
						src/asset/image/url()%20highlighting%20error%20in%20dark.webp
					"
					media="(prefers-color-scheme: dark)"
				/>
				<img
					fetchpriority="high"
					src="src/asset/image/url()%20highlighting%20error%20in%20light.webp"
					alt="inspector-stylesheet 中出现了高亮异常，后续字符变为字符串的高亮颜色。"
					width="600"
					height="300"
				/>
			</picture>
			<figcaption aria-hidden="true">
				inspector-stylesheet
				中出现了高亮异常，后续字符变为字符串的高亮颜色。
			</figcaption>
		</figure>
		<h2>解决方案</h2>
		<pre data-lang="CSS">
* {
	background-image: url("");
	color: #FF0;
}</pre
		>
		<h2>后记</h2>
		<p>
			本 Bug 在
			<a
				href="https://issues.chromium.org/issues/348675992"
				target="_blank"
				>Chromium Issue Tracker</a
			>
			和
			<a
				href="https://github.com/codemirror/dev/issues/1402"
				target="_blank"
				>GitHub</a
			>
			上都进行了提报，现在已得到了解决。
		</p>
		<footer>
			<a href=".">鬼影的基地</a>
		</footer>
		<link rel="stylesheet" media="print" href="src/css/print.min.css" />
	</body>
</html>
